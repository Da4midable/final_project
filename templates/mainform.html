<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Form</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main_style.css') }}">
</head>
<body>

<div class="header">
    <div class="welcome">
        <h1>Welcome, {{ user_full_name }}</h1>
    </div>
    <div class="profile">
        <img src="{{ url_for('static', filename='uploads/' + user_profile_picture) }}" alt="Profile Picture">
    </div>
</div>

<div class="quiz-section">
    <h2 class="quiz-title">Ready for a quiz? Click below.</h2>
    <button id="quizToggle" class="quiz-toggle">+</button>
    <ul class="quiz-topics" id="quizTopics" style="display: none;">
        <li><a href="/quiz/programming">Programming</a></li>
        <li><a href="/quiz/english">English</a></li>
        <li><a href="/quiz/history">History</a></li>
        <li><a href="/quiz/economics">Economics</a></li>
        <li><a href="/quiz/biology">Biology</a></li>
    </ul>
</div>

<div class="date-time-panel">
    <strong>Date & Time: </strong> <span id="dateTime"></span>
</div>

<div class="member-since">
    <strong>Member since: </strong> <span id="memberSince"></span>
</div>

<div class="scores-grid">
    <div class="score-item">
        <h3>Recent Score</h3>
        <p>{{ recent_score }}</p>
    </div>
    <div class="score-item">
        <h3>All-time Score</h3>
        <p>{{ all_time_score }}</p>
    </div>
</div>

<div class="leaderboard">
    <h2>Leaderboard</h2>
    <table>
        <thead>
            <tr>
                <th>Category</th>
                <th>User</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Programming</td>
                <td>{{ top_user_programming }}</td>
                <td>{{ top_score_programming }}</td>
            </tr>
            <tr>
                <td>English</td>
                <td>{{ top_user_english }}</td>
                <td>{{ top_score_english }}</td>
            </tr>
            <tr>
                <td>History</td>
                <td>{{ top_user_history }}</td>
                <td>{{ top_score_history }}</td>
            </tr>
            <tr>
                <td>Economics</td>
                <td>{{ top_user_economics }}</td>
                <td>{{ top_score_economics }}</td>
            </tr>
            <tr>
                <td>Biology</td>
                <td>{{ top_user_biology }}</td>
                <td>{{ top_score_biology }}</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="logout">
    <button>Logout</button>
</div>

<script>
    document.getElementById("quizToggle").addEventListener("click", function() {
        const topics = document.getElementById("quizTopics");
        topics.style.display = topics.style.display === "block" ? "none" : "block";
    });

    function updateDateTime() {
        const dateTime = new Date().toLocaleString();
        document.getElementById("dateTime").textContent = dateTime;
    }
    setInterval(updateDateTime, 1000);


    const accountCreationDate = new Date("2024-01-01T12:00:00");
    function updateMemberSince() {
        const now = new Date();
        const diff = now - accountCreationDate;
        const seconds = Math.floor(diff / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        const days = Math.floor(hours / 24);
        document.getElementById("memberSince").textContent = `${days} days, ${hours % 24} hours, ${minutes % 60} minutes, and ${seconds % 60} seconds ago`;
    }
    setInterval(updateMemberSince, 1000);
</script>
</body>
</html>
